<!DOCTYPE html>
<html lang="en-gb">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>A first look at tattoos in the Digital Panopticon | Nineteenth-Century Criminal Tattoos</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="icon" type="image/png" href="https://CriminalTattoos.github.io/favicon.png" />
<meta property="og:site_name" content="Nineteenth-Century Criminal Tattoos" />
<meta property="og:description" content="A data exploration and visualisation blog" />

<meta property="og:type" content="article" />
<meta property="article:author" content="Sharon Howard" />
<meta property="article:published_time" content="12 April 2021" />
<meta property="og:title" content="A first look at tattoos in the Digital Panopticon" />

  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/post/">Posts</a></li>
      
      <li><a href="/resources/">Resources</a></li>
      
      <li><a href="https://github.com/CriminalTattoos">GitHub</a></li>
      
      <li><a href="/index.xml">RSS</a></li>
      
    </ul>
    </nav>

<div class="article-meta">
<h1>
  <span class="title">A first look at tattoos in the Digital Panopticon</span>
</h1>


  <h2 class="author">Sharon Howard</h2>


  <h2 class="date">12 April 2021</h2>

</div>

<main>

<script src="https://CriminalTattoos.github.io/post/2021/04/12/a-first-look-at-tattoos-in-the-digital-panopticon/index_files/header-attrs/header-attrs.js"></script>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This post is an introduction to, firstly, the newly-released <a href="https://doi.org/10.15131/shef.data.13398665.v1">Tattoos in the Digital Panopticon Database, 1793-1925</a>; and, secondly, to the software and code being used to analyse the data.</p>
<p>The dataset contains about 195,000 physical descriptions of convicts and prisoners. About 75,000 of these have been identified as containing tattoos, representing about 58,000 individuals (according to DP record linkage), and somewhere in the region of 350,000 discrete tattoos.</p>
<p>The dataset is derived from types of source material that many historians are more likely to encounter than the narrative and printed texts that are common in Digital Humanities research: local and central registers, files, forms and other early modern and modern archival records which are full of information that is neither free-flowing prose nor quite structured enough to be easy to extract computationally. Such data is still most likely to be compiled laboriously by hand.</p>
<p>We didn’t have the resources to do that, and this dataset simply can’t be as accurate as a manually-created one. Our goal was to make it <em>good enough</em> to use for large scale quantitative analysis, in which the imperfections taken as a whole are too small to significantly change results, and exploratory analyses that will help to provoke ideas and provide pointers to dig deeper into the mass of data.</p>
<p>We’ve made the data openly available - all the descriptions, not just those in which we identified tattoos, and including the transcriptions as well as the extracted tattoo data - for several reasons:</p>
<ul>
<li>transparency about the limitations of the data</li>
<li>aiding others to improve on our work</li>
<li>facilitate testing of the project’s research findings</li>
<li>enable other re-uses and explorations of the data</li>
</ul>
<p>The dataset also contains information that will aid users to locate the records at the Digital Panopticon website and from there, if desired, find digitised images of the originals (but note that in many cases the images are behind paywalls).</p>
</div>
<div id="the-background" class="section level2">
<h2>The background</h2>
<p>The <a href="https://www.digitalpanopticon.org">Digital Panopticon 1780-1925</a> is an ambitious large-scale digital history project to investigate the relative impacts of different types of punishment on criminal desistance, health outcomes, employment opportunities, and family life over the long term, using record linkage on more than 50 existing and newly-digitised datasets including the Proceedings of the Old Bailey, Founders and Survivors, commercially digitised genealogical data on criminals and prisoners in 19th-century Britain, and civil data on births, marriages and deaths.</p>
<p>The project’s central focus was on tens of thousands of Londoners sentenced to imprisonment or transportation at the Old Bailey between 1780 and 1885, though the nature of the data entailed collecting information on many more prisoners and convicts in Britain and Australia. Ultimately, the Digital Panopticon web resource, launched in September 2017, contained almost 4 million records dating from the mid 18th century to the early 20th century.</p>
<p>Many of these datasets contain information relating to the physical characteristics of individuals. DP’s main interest in this kind of data was for <a href="https://www.digitalpanopticon.org/A_Guide_to_Researching_Biometrics">biometric analysis of heights and ages</a>. However, some records also contain much more detailed but less structured descriptions of “distinguishing marks”, including scars from injuries, marks of past diseases and corporal punishments, and more voluntarily acquired markings.</p>
<p>Almost accidentally, DP created a huge database of tattooing practices in Britain and Australia from the end of the 18th century to the early 20th century, but one that was not easily usable because of the diverse, composite nature of the fields containing the material. The Criminal Tattoos project’s goal has been to find ways to make this information more accessible, and to explore ways of analysing and visualising it.</p>
</div>
<div id="purpose-of-the-blog-posts" class="section level2">
<h2>Purpose of the blog posts</h2>
<p>This and subsequent blog posts aren’t primarily about the project’s research, which is introduced <a href="https://theconversation.com/how-tattoos-became-fashionable-in-victorian-england-122487">here</a> and is in the process of being submitted to journals. Instead, I have three main goals.</p>
<p>One is to facilitate and encourage creative re-uses of the dataset (which is itself already the outcome of many re-uses, bringing together data created by several projects in different ways over almost two decades). I don’t think it’s enough to just release the data with technical documentation, and leave it at that. It isn’t a particularly easy dataset to work with, because of its size and complexity. So I’ll introduce some aspects of the data with examples of what I’ve been doing to inform the project research over the last 18 months.</p>
<p>I’ll also use it to document at least some of the visualisations that we’ve already shared at the <a href="https://www.digitalpanopticon.org/visualisations">DP visualisations gallery</a>.</p>
<p>A second (but related) goal is to make historians more aware of different ways of using visualisation techniques, beyond the familiar simple bar or line graph, especially for uncovering complex patterns in multivariate data.</p>
<p>More specifically, I want to introduce the tools and methods I’ve been using to analyse and visualise the data, and to provide practical examples for historians, both for this and similar kinds of datasets. I hope to show how R can be an effective tool for working with complex historical datasets, and how it might be worth the time and effort needed to learn how to use it.</p>
<p>(This doesn’t mean I think R is “better” than, say, Python or another language. I do think programming languages tend to have different strengths, not least the communities that have grown around them and the resources those communities create for them. My opinion is that Python is especially strong for processing and analysing large corpora of relatively unstructured texts (and in fact the extraction/processing side of the project was done using Python); where R is particularly useful for analysing and visualising large and complex but more structured data. Moreover, I’m currently much more competent and comfortable using R and the limited time available for this project meant I needed that. So R was a better fit for <em>this particular project</em>.)</p>
<div id="r-rmarkdown-and-the-tidyverse" class="section level3">
<h3>R, RMarkdown and the “Tidyverse”</h3>
<p>All the posts are being written in <a href="https://rmarkdown.rstudio.com/">RMarkdown</a>, as notebooks that weave together narrative text and chunks of code. They are then turned into HTML webpages for the blog (but could alternatively be turned into Word docs, or PDFs, or presentation slides).</p>
<p>Thus, the posts will include plenty of code and some explanations. However, they aren’t intended to be step-by-step tutorials of which there are plenty online. I recommend these as good starting points:</p>
<ul>
<li><a href="https://programminghistorian.org/en/lessons/r-basics-with-tabular-data">R Basics with Tabular Data (Programming Historian)</a></li>
<li><a href="https://programminghistorian.org/en/lessons/data_wrangling_and_management_in_R">Data Wrangling and Management in R (Programming Historian)</a></li>
<li>(which can be followed by various other R lessons at the Programming Historian)</li>
</ul>
<p>And this more comprehensive (free) guide book:</p>
<ul>
<li><a href="https://r4ds.had.co.nz/">R for Data Science (Hadley Wickham)</a></li>
</ul>
<p>Nonetheless I think I should set out a few of the basic concepts here. I’m using a particular variant of the wider R ecosystem, which works by linking together a sequence of verbal commands with a “pipe” symbol <strong>%&gt;%</strong>. The core functions - like “verbs” - for the work of tidying, reshaping, grouping and summarising data for quantitative analysis are:</p>
<ul>
<li><strong>select()</strong> - specify <em>columns</em> in the data table to work with (useful if there are a lot of them!)</li>
<li><strong>filter()</strong> - limit analysis to specified <em>rows</em> of data</li>
<li><strong>arrange()</strong> - re-sort them</li>
<li><strong>mutate()</strong> - create new columns, by doing some operation on the existing columns</li>
<li><strong>summarise()</strong> - collapse many values down to a single summary value</li>
<li><strong>group_by()</strong> - group rows of data together in preparation for some further summarise/mutate command</li>
<li><strong>..._join()</strong> - a set of verbs for linking related tables together</li>
</ul>
<p>(I find this flavour of R particularly congenial because I came to the language from using MySQL, which operates in a similar way. Others are available.)</p>
<p>Some other R terminology:</p>
<ul>
<li><strong>object</strong>: objects can be all sorts of things in R, from a single number to a string of characters to a data table to a nested list of things, and other highly specialised data formats; but the key feature is that they’ve been named and saved for re-use in a script, so you can for example avoid having to re-import a file every time you want to do something to it</li>
<li><strong>package</strong>: like many modern programming languages and software tools, R has a relatively limited core functionality (“base R”) which is then extended by third-party developers to provide convenient tools for particular uses. Most readers will be familiar with this concept even if they have different names in different tools - extensions, plugins, libraries, etc. In R <em>packages</em> is the usual term, often denoted by writing the name in {curly brackets}. (You can also get data packages which bundle up datasets in a convenient ready-made R format.)</li>
</ul>
</div>
</div>
<div id="the-health-warnings" class="section level2">
<h2>The health warnings</h2>
<p>Users of the data should be aware from the outset that the dataset is a very long way from perfect; extracting tattoos from the descriptions was a major challenge for a small project with limited funding. It is likely that many tattoos (especially the “long tail” of rare tattoo designs) have been missed, and conversely things that were not tattoos have been misidentified. The process aimed not simply to find tattoos but also to associate them with body locations, and this could also go wrong in various ways.</p>
<p>The extraction methodology is described in some detail
<a href="https://www.digitalpanopticon.org/Tattoos,_1793-1925">on the DP website</a>, so I’m not going to repeat it here. But this is the sort of thing the project had to grapple with (tattoo elements highlighted):</p>
<blockquote>
<p><strong>Crucifix above elbow Joint rt arm</strong> deep dimple on chin Scar near outer corner rt eye <strong>Moon &amp; 7 stars JW mermaid anchor JC MD JD TD &amp; Cannon (Prop) inside rt arm</strong> [<a href="https://www.digitalpanopticon.org/life?id=obpt18250915-266-defend1341">James Rees</a>, transported to Tasmania 1826]</p>
</blockquote>
<blockquote>
<p>Scar forehead, right eyebrow, right ear, left cheek, left side of nose, both sides of neck, lip, right arm elbow, right leg, right shoulder. <strong>I.L.M.K Liverpool E.R on right arm</strong>, ears pierced, lost several teeth. [<a href="https://www.digitalpanopticon.org/life?id=obpdef1-626-18770807">Bridget Lacking</a>, sentenced to penal servitude 1881]</p>
</blockquote>
<blockquote>
<p>scar right cheek and several back and loins ; <strong>female and barge left forearm ; half bracelet left wrist;</strong> birthniark left groin. [<a href="https://www.digitalpanopticon.org/life?id=rhc48452">Henry Palmer</a>, register of habitual criminals 1899 and 1901]</p>
</blockquote>
<p>There are various problems. They’re a rather undifferentiated stream of small pieces of information, not in any fixed order, not all tattoos, and on occasion not actually about physical characteristics at all. Punctuation is unreliable, if it’s used at all. Abbreviations (such as “r” or “rt” for right and of course “&amp;” for and) are very common and also quite variable. There can, of course, also be transcription errors.</p>
<p>If a person had several tattoos on one part of the body, they’d usually be grouped together, so attaching a design to the right location is also not a simple exercise (oh, and the body part might sometimes be written before the tattoos, rather than afterwards as in these examples).</p>
<p>Even after isolating tattoos from other strings of text, it often isn’t easy to define a single “tattoo”. You need to know that “Moon &amp; 7 stars” is a religious symbol and so probably <em>not</em> two separate tattoos. It’s one of many phrases that have been identified as such. But what about something like “female and barge”? This might have been something like a picture of a woman on a barge or might be two separate tattoos “a woman” and “a barge”; in the data it’s the latter. There’s no way we could identify every possible phrase or combination of things that were originally a single tattoo design.</p>
<p>And it must be emphasised that in the vast majority of cases we have no idea what the tattoos actually looked like. (In a very few cases the original records contain tiny sketched drawings of the tattoos, which have been transcribed as text if they could be interpreted.) The data is entirely based on written descriptions, written down by many different officials over a long period of time, with undoubtedly hugely varying degrees of diligence and competence.</p>
</div>
<div id="the-convict-descriptions-data" class="section level2">
<h2>The convict descriptions data</h2>
<p>The dataset contains two CSV files. Here I’m focusing on <strong>convict_descriptions</strong>, which contains 241207 rows of data. The second, <strong>convict_description_segments</strong> has more detailed information about the bodily locations of tattoos; I’ll get to that in a later post.</p>
<p>The first thing to do is load the R packages needed for analysis using the <code>library()</code> function. For now, I just want one, {tidyverse}, though that’s really a big convenience package of related sub-packages.</p>
<pre class="r"><code># the # is used to insert comments, so R will ignore them when it executes the code
# this helps to remind you what on earth you were trying to do, when you have to read your code again later
# or to enable other people reading your code to understand what you&#39;re trying to do

# the library() function is used to load packages that aren&#39;t part of the R core. 

library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.3     ✓ purrr   0.3.4
## ✓ tibble  3.1.0     ✓ dplyr   1.0.5
## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
## ✓ readr   1.4.0     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Next, import the data (with the <code>read_csv()</code> function). (An important principle here is that you import a <em>copy</em> of your data and then work with it entirely inside R; you don’t do <em>anything</em> to the original data file.)</p>
<pre class="r"><code># &lt;-  is used to create a new object

descriptions_data &lt;- 
  read_csv(here::here(&quot;_data&quot;, &quot;convict_descriptions.2020-12-17.csv&quot;), guess_max = 100000)</code></pre>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   .default = col_character(),
##   descyear = col_double(),
##   desc_count = col_double(),
##   born = col_double(),
##   trials = col_double(),
##   earliest_trial = col_double(),
##   latest_trial = col_double()
## )
## ℹ Use `spec()` for the full column specifications.</code></pre>
<p>Now I can take a <code>glimpse()</code> at it: there is a lot of stuff in there. 42 columns of data!</p>
<pre class="r"><code>descriptions_data %&gt;% 
  glimpse()</code></pre>
<pre><code>## Rows: 241,207
## Columns: 42
## $ subrecordid                      &lt;chr&gt; &quot;cin77589&quot;, &quot;cin77590&quot;, &quot;cin77591&quot;, &quot;…
## $ recordid                         &lt;chr&gt; &quot;cin77589&quot;, &quot;cin77590&quot;, &quot;cin77591&quot;, &quot;…
## $ life_id                          &lt;chr&gt; &quot;cin77589&quot;, &quot;cin77590&quot;, &quot;cin77591&quot;, &quot;…
## $ descyear                         &lt;dbl&gt; 1850, 1850, 1850, 1850, 1850, 1850, 1…
## $ dataset                          &lt;chr&gt; &quot;cin&quot;, &quot;cin&quot;, &quot;cin&quot;, &quot;cin&quot;, &quot;cin&quot;, &quot;c…
## $ hastattoo                        &lt;chr&gt; &quot;y&quot;, &quot;y&quot;, &quot;n&quot;, &quot;y&quot;, &quot;n&quot;, &quot;n&quot;, &quot;n&quot;, &quot;n…
## $ haspunishmentmark                &lt;chr&gt; &quot;n&quot;, &quot;n&quot;, &quot;n&quot;, &quot;n&quot;, &quot;n&quot;, &quot;n&quot;, &quot;n&quot;, &quot;n…
## $ desc_count                       &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ designs                          &lt;chr&gt; &quot;anchor|dog|moon|man and woman|diamon…
## $ writtenwords                     &lt;chr&gt; &quot;IMB|ST&quot;, &quot;JP|CPEP&quot;, NA, &quot;EM|LARK&quot;, N…
## $ writtenyears                     &lt;chr&gt; &quot;1838&quot;, NA, NA, NA, NA, NA, NA, NA, N…
## $ punishmentmarks                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ body                             &lt;chr&gt; &quot;right arm|left arm&quot;, &quot;right hand|rig…
## $ digest                           &lt;chr&gt; &quot;[right arm : man and woman|sun|dog|S…
## $ subjects                         &lt;chr&gt; &quot;love year astronomy namesinitials pl…
## $ url                              &lt;chr&gt; &quot;https://www.digitalpanopticon.org/li…
## $ fulldescription                  &lt;chr&gt; &quot;Man and woman, 2 stars, 1 dog, ST 18…
## $ given                            &lt;chr&gt; &quot;Samuel&quot;, &quot;John&quot;, &quot;William&quot;, &quot;John&quot;, …
## $ surname                          &lt;chr&gt; &quot;Scattergood&quot;, &quot;Patience&quot;, &quot;Branson&quot;,…
## $ gender                           &lt;chr&gt; &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m…
## $ born                             &lt;dbl&gt; 1814, 1820, 1817, 1820, 1824, 1826, 1…
## $ transported                      &lt;chr&gt; &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;y…
## $ ticket_of_leave                  &lt;chr&gt; &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;…
## $ penalservitude                   &lt;chr&gt; &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;…
## $ granted_prison_license           &lt;chr&gt; &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;…
## $ married                          &lt;chr&gt; &quot;unknown&quot;, &quot;unknown&quot;, &quot;unknown&quot;, &quot;unk…
## $ insane                           &lt;chr&gt; &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;…
## $ in_hulks                         &lt;chr&gt; &quot;unknown&quot;, &quot;unknown&quot;, &quot;unknown&quot;, &quot;unk…
## $ religion                         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ religion_category                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ occupation                       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ occupation_top_50                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ hisco                            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ place_of_birth                   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ ship                             &lt;chr&gt; &quot;scindian&quot;, &quot;scindian&quot;, &quot;scindian&quot;, &quot;…
## $ earliest_trial_offence_category  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ earliest_trial_sentence_category &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ latest_trial_offence_category    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ latest_trial_sentence_category   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ trials                           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ earliest_trial                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ latest_trial                     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…</code></pre>
<p>That’s because, as well as the descriptions and tattoos, we included various pieces of information about the individuals drawn from the DP database. Very often, this has come from the same record as the description (if a record was detailed enough to contain physical descriptions, it probably also had quite a lot of other personal information). Some of it, on the other hand, is drawn from a larger <strong>life archive</strong> of linked records for an individual. (You can read the dataset documentation for more detail.) I’m going to ignore most of it in this post. But at least a few explanations are in order now.</p>
<div id="identifiers" class="section level3">
<h3>identifiers</h3>
<p>There are <em>three</em> ID columns, all based on Digital Panopticon’s own IDs. Generally you’ll only need to work with two of them.</p>
<ul>
<li><code>subrecordid</code> is the unique identifier for each record in the table</li>
<li><code>life_id</code> is the ID for a <em>person</em>, more precisely what DP calls a “life archive”, which links together all the records for the same individual (we hope; and in practice, we have only a single record for many individuals).</li>
</ul>
<p>It can be quite important to bear in mind the distinctions between <em>people</em>, <em>records</em>, <em>descriptions</em> and <em>tattoos</em> in the data. One record = one row in the table. A person can have multiple records, not all of which contain a description, and descriptions don’t all contain any tattoos.</p>
<p>(The third ID column is <code>recordid</code> and this is nearly - but not quite - always identical to <code>subrecordid</code>. You’re <em>very</em> unlikely to need it. The reason it exists separately is because some records have come from complex relational databases in which an individual could have several description records, from different tables. Thus the <code>recordid</code> is the ID for that database record as a whole, whereas <code>subrecordid</code> gives each of the descriptions a unique identifier.)</p>
<p>So, how many individual <em>people</em> (according to DP’s record linkage) and how many records in total are there in the dataset?</p>
<pre class="r"><code>descriptions_data %&gt;%
  # n_distinct() is a function to count *unique* values; n() counts *all* values
  summarise(n_life_id = n_distinct(life_id), 
            n_total = n()
            )</code></pre>
<pre><code>## # A tibble: 1 x 2
##   n_life_id n_total
##       &lt;int&gt;   &lt;int&gt;
## 1    193460  241207</code></pre>
</div>
<div id="dp-datasets" class="section level3">
<h3>DP datasets</h3>
<p>The column <code>dataset</code> is the short code for each… errmmm… dataset in the… errrmmm… dataset. (Perhaps we didn’t think some of the naming through as well as we could have done.) In fact this refers to <a href="https://www.digitalpanopticon.org/Records">the datasets in the Digital Panopticon</a>. Just to confuse everyone a bit further, they’re grouped slightly differently here, so we’ve got 8 datasets where there are only six in DP itself.</p>
<pre class="r"><code>descriptions_data %&gt;%
  distinct(dataset) %&gt;%
  arrange(dataset)</code></pre>
<pre><code>## # A tibble: 8 x 1
##   dataset
##   &lt;chr&gt;  
## 1 cin    
## 2 fas    
## 3 fas_pgo
## 4 hcr    
## 5 mpr    
## 6 pld    
## 7 rhc    
## 8 tlm</code></pre>
<p>In DP, fas + fas_pgo are treated as a single dataset, as are pld + tlm. The full names are in the Tattoos database documentation, though I’ll be coming back to them briefly before the end of the post.</p>
<p>How many descriptions are there in each dataset? For this I need to use <code>group_by()</code>, to group together rows from the same dataset, before I can <code>summarise()</code>.</p>
<pre class="r"><code>descriptions_data %&gt;%
  group_by(dataset) %&gt;%
  summarise(n_records = n()) %&gt;%
  ungroup()</code></pre>
<pre><code>## # A tibble: 8 x 2
##   dataset n_records
##   &lt;chr&gt;       &lt;int&gt;
## 1 cin          9719
## 2 fas         76830
## 3 fas_pgo     10587
## 4 hcr            12
## 5 mpr           914
## 6 pld           882
## 7 rhc        135996
## 8 tlm          6267</code></pre>
<p>But I can also - and most often do because it’s shorter and I’m lazy - do exactly the same thing with another handy function, <code>count()</code>. (<code>sort=TRUE</code> is ordering the results by count rather than alphabetically.)</p>
<pre class="r"><code>descriptions_data %&gt;%
  count(dataset, name=&quot;n_records&quot;, sort=TRUE)</code></pre>
<pre><code>## # A tibble: 8 x 2
##   dataset n_records
##   &lt;chr&gt;       &lt;int&gt;
## 1 rhc        135996
## 2 fas         76830
## 3 fas_pgo     10587
## 4 cin          9719
## 5 tlm          6267
## 6 mpr           914
## 7 pld           882
## 8 hcr            12</code></pre>
<p>They vary somewhat in size!</p>
</div>
<div id="tattoos" class="section level3">
<h3>tattoos</h3>
<p>There are <em>nine</em> columns related to the actual descriptions and tattoos extracted from them.</p>
<ul>
<li><code>hastattoo</code></li>
<li><code>designs</code></li>
<li><code>writtenwords</code></li>
<li><code>writtenyears</code></li>
<li><code>body</code></li>
<li><code>digest</code></li>
<li><code>subjects</code></li>
<li><code>fulldescription</code></li>
<li><code>desc_count</code></li>
</ul>
<p><code>hastattoo</code> tells you a) whether there is text in the description field (“u” means that it’s blank) and b) whether we identified any tattoos in the description if present (“y” for yes; “n” for no).</p>
<pre class="r"><code>descriptions_data %&gt;%
  count(hastattoo)</code></pre>
<pre><code>## # A tibble: 3 x 2
##   hastattoo      n
##   &lt;chr&gt;      &lt;int&gt;
## 1 n         118850
## 2 u          46909
## 3 y          75448</code></pre>
<p><img src="https://CriminalTattoos.github.io/post/2021/04/12/a-first-look-at-tattoos-in-the-digital-panopticon/index_files/figure-html/unnamed-chunk-9-1.png" width="95%" /></p>
<p><code>desc_count</code> is the number of separate records for the individual person to whom the record belongs. Out of curiosity, how many individuals have more than one record?</p>
<pre class="r"><code>descriptions_data %&gt;%
  filter(desc_count&gt;1) %&gt;% 
  summarise(n=n_distinct(life_id))</code></pre>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1 24127</code></pre>
<p>I don’t tend to use desc_count, because I can calculate it for myself using life_id. But it’s quite handy for some questions.</p>
<p>What’s the top number of records for one individual?</p>
<pre class="r"><code>descriptions_data %&gt;%
  count(life_id) %&gt;%
  top_n(1, n)</code></pre>
<pre><code>## # A tibble: 1 x 2
##   life_id     n
##   &lt;chr&gt;   &lt;int&gt;
## 1 fas2916    50</code></pre>
<p>How many records do most individuals have?</p>
<pre class="r"><code>descriptions_data %&gt;%
  distinct(life_id, desc_count) %&gt;%
  count(desc_count, name=&quot;n_records&quot;, sort = TRUE) %&gt;%
  filter(desc_count&lt;=10)</code></pre>
<pre><code>## # A tibble: 10 x 2
##    desc_count n_records
##         &lt;dbl&gt;     &lt;int&gt;
##  1          1    169333
##  2          2     14009
##  3          3      4981
##  4          4      2244
##  5          5      1201
##  6          6       670
##  7          7       368
##  8          8       204
##  9          9       129
## 10         10        82</code></pre>
<p>How many records containing descriptions do most have?</p>
<pre class="r"><code>descriptions_data %&gt;%
  filter(hastattoo !=&quot;u&quot;) %&gt;% 
  # filter(!is.na(fulldescription)) would give the same result
  distinct(life_id, desc_count) %&gt;%
  count(desc_count, name=&quot;n_records_with_desc&quot;, sort = TRUE) %&gt;%
  filter(desc_count&lt;=10)</code></pre>
<pre><code>## # A tibble: 10 x 2
##    desc_count n_records_with_desc
##         &lt;dbl&gt;               &lt;int&gt;
##  1          1              129122
##  2          2               13525
##  3          3                4907
##  4          4                2222
##  5          5                1192
##  6          6                 664
##  7          7                 364
##  8          8                 204
##  9          9                 129
## 10         10                  82</code></pre>
<p>How many records containing tattoos?</p>
<pre class="r"><code>descriptions_data %&gt;%
  filter(hastattoo ==&quot;y&quot;) %&gt;% 
  # filter(!is.na(fulldescription)) would give the same answer
  distinct(life_id, desc_count) %&gt;%
  count(desc_count, name=&quot;n_records_with_tattoos&quot;, sort = TRUE) %&gt;%
  filter(desc_count&lt;=10)</code></pre>
<pre><code>## # A tibble: 10 x 2
##    desc_count n_records_with_tattoos
##         &lt;dbl&gt;                  &lt;int&gt;
##  1          1                  45363
##  2          2                   6570
##  3          3                   2738
##  4          4                   1313
##  5          5                    728
##  6          6                    423
##  7          7                    224
##  8          8                    122
##  9          9                     81
## 10         10                     55</code></pre>
<p><code>subjects</code> refers to a set of broad categories for tattoos (eg “nationalidentity” or “pleasure”); they’re a bit different from the rest in that project staff manually decided on the assignment of subjects to tattoo designs. You should be aware that it’s a summary of all the subjects for the description, not just for a single tattoo, and the column can contain a list of several subjects.</p>
<p><code>fulldescription</code> is the original transcription of the description; <code>designs</code>, <code>writtenwords</code> and <code>writtenyears</code> are tattoo classifications; <code>body</code> and <code>digest</code> both relate to the location of tattoos on the body.</p>
<p>Finally, there are various pieces of demographic and offending history (eg gender, birth place) drawn from the DP records.</p>
</div>
</div>
<div id="two-visualisations" class="section level2">
<h2>Two visualisations</h2>
<p>I want to finish this post by reproducing two visualisations I made for the <a href="https://www.digitalpanopticon.org/Tattoos,_1793-1925">project’s page at DP</a>.</p>
<p>First, there was a bar chart of the number of tattooed people per dataset:</p>
<p><img src="images/bar_convicts_tattooed_by_dataset.png" /></p>
<p>The steps for this are as follows</p>
<ul>
<li>filter to use only descriptions with tattoos</li>
<li>recode the dataset names where needed before grouping them</li>
<li>count unique life ids (so I get the number of people, not the number of descriptions)</li>
<li>make nice labels</li>
<li>make the chart</li>
</ul>
<pre class="r"><code>descriptions_filter_mutate_group_summarise &lt;-
descriptions_data %&gt;%
  filter(hastattoo==&quot;y&quot;) %&gt;%
    # case_when() enables you to change data depending on specified conditions
  mutate(dataset = case_when(
    dataset ==&quot;tlm&quot; ~ &quot;pld&quot;,  # if the dataset = tlm, change to pld (ie, merging them together)
    dataset ==&quot;fas_pgo&quot; ~ &quot;fas&quot;, # change fas_pgo to fas
    TRUE ~ dataset  # otherwise, leave unchanged
  )) %&gt;%
  group_by(dataset) %&gt;%
  summarise(n = n_distinct(life_id)) %&gt;%
  ungroup()

descriptions_filter_mutate_group_summarise %&gt;%
  arrange(-n)</code></pre>
<pre><code>## # A tibble: 6 x 2
##   dataset     n
##   &lt;chr&gt;   &lt;int&gt;
## 1 rhc     41948
## 2 fas     12538
## 3 cin      2381
## 4 pld       849
## 5 mpr        68
## 6 hcr        12</code></pre>
<p>Now the list of the dataset names for the labels.</p>
<pre class="r"><code>dataset_labels &lt;- c(&quot;Register of Habitual Criminals&quot;, &quot;Founders and Survivors&quot;, &quot;WA Convict Indents&quot;, &quot;Convict Licences&quot;, &quot;Millbank Prison Register&quot;, &quot;HO Criminal Registers&quot;)

dataset_labels</code></pre>
<pre><code>## [1] &quot;Register of Habitual Criminals&quot; &quot;Founders and Survivors&quot;        
## [3] &quot;WA Convict Indents&quot;             &quot;Convict Licences&quot;              
## [5] &quot;Millbank Prison Register&quot;       &quot;HO Criminal Registers&quot;</code></pre>
<p>To make the chart I use a package called {ggplot2} (which is included in the Tidyverse so I don’t need to load it separately). ggplot is advertised as “a grammar of graphics”, which should give a sense of how it works - rather like Tidyverse R as a whole. The different elements or layers of a chart are coded in separate steps, including</p>
<ul>
<li><strong>geom_</strong> to set the type of chart (bar, line, dot, etc)</li>
<li><strong>scale_</strong> to handle axis and legend formatting, labelling and so on</li>
<li><strong>facet_</strong> to split a chart into subcharts (aka “small multiples”)</li>
<li><strong>theme_</strong> provides some convenient packages for overall aesthetics</li>
</ul>
<pre class="r"><code>descriptions_filter_mutate_group_summarise %&gt;%
  mutate(dataset = fct_reorder(dataset, n)) %&gt;% # put the bars in the order I want in the chart
  
  ggplot(aes(x=dataset, y=n, fill=dataset)) + # set up the data for ggplot
  geom_col(show.legend = FALSE) + # draw a bar chart
  coord_flip() + # make the bars horizontal (some of the labels are quite long and it looks better)
  scale_fill_brewer(palette = &quot;Reds&quot;) + # add some colours to the bars; purely cosmetic here
  scale_x_discrete(labels=dataset_labels) + # add the labels
  theme_minimal() + 
  labs(y=&quot;number of convicts&quot;, x=NULL, title=&quot;Number of Tattooed Convicts by Dataset&quot;) # titles </code></pre>
<p><img src="https://CriminalTattoos.github.io/post/2021/04/12/a-first-look-at-tattoos-in-the-digital-panopticon/index_files/figure-html/unnamed-chunk-17-1.png" width="95%" /></p>
<p>The second bar chart showed the frequencies of tattoo subjects.</p>
<p><img src="images/bar_subject_frequencies.png" /></p>
<p>This will be quite similar to the first chart, but the <code>subjects</code> column can contain several subjects, not just one.</p>
<pre class="r"><code>descriptions_data %&gt;%
  filter(hastattoo==&quot;y&quot;) %&gt;%
  # not all tattoos have subjects assigned; filter out the empty ones
  filter(!is.na(subjects)) %&gt;% 
  select(subjects) %&gt;%
  # just get the first six rows for a quick look
  head() </code></pre>
<pre><code>## # A tibble: 6 x 1
##   subjects                                        
##   &lt;chr&gt;                                           
## 1 love year astronomy namesinitials pleasure naval
## 2 namesinitials                                   
## 3 namesinitials naval                             
## 4 namesinitials                                   
## 5 love naval religion                             
## 6 jewellery</code></pre>
<p>So I need to reshape the data so there’s just one subject per line before counting them; I’ll do this with a function called <code>unnest_tokens()</code> from the excellent {tidytext} package.</p>
<p>So, the steps for this one:</p>
<ul>
<li>get descriptions with tattoos only</li>
<li>filter out those without any subjects assigned</li>
<li>separate out lists of subjects into one subject per line</li>
<li>get the summary counts</li>
</ul>
<pre class="r"><code>library(tidytext)

descriptions_subjects_tokenised &lt;-
descriptions_data %&gt;%
  filter(hastattoo==&quot;y&quot;, !is.na(subjects)) %&gt;%
  select(subrecordid, subjects) %&gt;%
  unnest_tokens(subject, subjects) %&gt;%
  count(subject, sort=TRUE)

descriptions_subjects_tokenised</code></pre>
<pre><code>## # A tibble: 19 x 2
##    subject               n
##    &lt;chr&gt;             &lt;int&gt;
##  1 namesinitials     41832
##  2 naval             21417
##  3 religion          14412
##  4 love              14342
##  5 jewellery         13154
##  6 nationalidentity  11948
##  7 nature            11082
##  8 astronomy          7113
##  9 death              4366
## 10 britain            3879
## 11 pleasure           3237
## 12 military           2628
## 13 year               1295
## 14 ireland            1211
## 15 america            1165
## 16 justicepunishment   439
## 17 sex                 205
## 18 invention            49
## 19 australia            10</code></pre>
<p>And now to draw the chart:</p>
<pre class="r"><code>descriptions_subjects_tokenised %&gt;%
  mutate(subject = fct_reorder(subject, n)) %&gt;%
    ggplot(aes(subject, n)) +
    geom_col() +
    coord_flip() +
    theme_minimal() +
    labs(y = &quot;number of subjects&quot;,  x = NULL, title=&quot;Frequencies of Tattoo Subjects&quot;)</code></pre>
<p><img src="https://CriminalTattoos.github.io/post/2021/04/12/a-first-look-at-tattoos-in-the-digital-panopticon/index_files/figure-html/unnamed-chunk-20-1.png" width="95%" /></p>
</div>

</main>

  <footer>
  <script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  
  <hr/>
  <a href="http://sharonhoward.org">Sharon Howard</a> | Powered by <a href="https://bookdown.org/yihui/blogdown/">blogdown</a> and <a href="https://themes.gohugo.io/xmin/">XMin theme</a>
  
  </footer>
  </body>
</html>

